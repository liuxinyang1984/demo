var N=(a,r)=>()=>(r||a((r={exports:{}}).exports,r),r.exports);var X=N((O,A)=>{/*! Editor.md v1.5.0 | editormd.min.js | Open source online markdown editor. | MIT License | By: Pandao | https://github.com/pandao/editor.md | 2015-06-09 */(function(a){typeof require=="function"&&typeof O=="object"&&typeof A=="object"?A.exports=a:typeof define=="function"?define.amd||define(["jquery"],a):window.editormd=a()})(function(){var a=typeof jQuery<"u"?jQuery:Zepto;if(typeof a<"u"){var r=function(e,t){return new r.fn.init(e,t)};r.title=r.$name="Editor.md",r.version="1.5.0",r.homePage="https://pandao.github.io/editor.md/",r.classPrefix="editormd-",r.toolbarModes={full:["undo","redo","|","bold","del","italic","quote","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","image","code","preformatted-text","code-block","table","datetime","emoji","html-entities","pagebreak","|","goto-line","watch","preview","fullscreen","clear","search","|","help","info"],simple:["undo","redo","|","bold","del","italic","quote","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","watch","preview","fullscreen","|","help","info"],mini:["undo","redo","|","watch","preview","|","help","info"]},r.defaults={mode:"gfm",name:"",value:"",theme:"",editorTheme:"default",previewTheme:"",markdown:"",appendMarkdown:"",width:"100%",height:"100%",path:"./lib/",pluginPath:"",delay:300,autoLoadModules:!0,watch:!0,placeholder:"Enjoy Markdown! coding now...",gotoLine:!0,codeFold:!1,autoHeight:!1,autoFocus:!0,autoCloseTags:!0,searchReplace:!0,syncScrolling:!0,readOnly:!1,tabSize:4,indentUnit:4,lineNumbers:!0,lineWrapping:!0,autoCloseBrackets:!0,showTrailingSpace:!0,matchBrackets:!0,indentWithTabs:!0,styleSelectedText:!0,matchWordHighlight:!0,styleActiveLine:!0,dialogLockScreen:!0,dialogShowMask:!0,dialogDraggable:!0,dialogMaskBgColor:"#fff",dialogMaskOpacity:.1,fontSize:"13px",saveHTMLToTextarea:!1,disabledKeyMaps:[],onload:function(){},onresize:function(){},onchange:function(){},onwatch:null,onunwatch:null,onpreviewing:function(){},onpreviewed:function(){},onfullscreen:function(){},onfullscreenExit:function(){},onscroll:function(){},onpreviewscroll:function(){},imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"",crossDomainUpload:!1,uploadCallbackURL:"",toc:!0,tocm:!1,tocTitle:"",tocDropdown:!1,tocContainer:"",tocStartLevel:1,htmlDecode:!1,pageBreak:!0,atLink:!0,emailLink:!0,taskList:!1,emoji:!1,tex:!1,flowChart:!1,sequenceDiagram:!1,previewCodeHighlight:!0,toolbar:!0,toolbarAutoFixed:!0,toolbarIcons:"full",toolbarTitles:{},toolbarHandlers:{ucwords:function(){return r.toolbarHandlers.ucwords},lowercase:function(){return r.toolbarHandlers.lowercase}},toolbarCustomIcons:{lowercase:'<a href="javascript:;" title="Lowercase" unselectable="on"><i class="fa" name="lowercase" style="font-size:24px;margin-top: -10px;">a</i></a>',ucwords:'<a href="javascript:;" title="ucwords" unselectable="on"><i class="fa" name="ucwords" style="font-size:20px;margin-top: -3px;">Aa</i></a>'},toolbarIconsClass:{undo:"fa-undo",redo:"fa-repeat",bold:"fa-bold",del:"fa-strikethrough",italic:"fa-italic",quote:"fa-quote-left",uppercase:"fa-font",h1:r.classPrefix+"bold",h2:r.classPrefix+"bold",h3:r.classPrefix+"bold",h4:r.classPrefix+"bold",h5:r.classPrefix+"bold",h6:r.classPrefix+"bold","list-ul":"fa-list-ul","list-ol":"fa-list-ol",hr:"fa-minus",link:"fa-link","reference-link":"fa-anchor",image:"fa-picture-o",code:"fa-code","preformatted-text":"fa-file-code-o","code-block":"fa-file-code-o",table:"fa-table",datetime:"fa-clock-o",emoji:"fa-smile-o","html-entities":"fa-copyright",pagebreak:"fa-newspaper-o","goto-line":"fa-terminal",watch:"fa-eye-slash",unwatch:"fa-eye",preview:"fa-desktop",search:"fa-search",fullscreen:"fa-arrows-alt",clear:"fa-eraser",help:"fa-question-circle",info:"fa-info-circle"},toolbarIconTexts:{},lang:{name:"zh-cn",description:"开源在线Markdown编辑器<br/>Open source online Markdown editor.",tocTitle:"目录",toolbar:{undo:"撤销（Ctrl+Z）",redo:"重做（Ctrl+Y）",bold:"粗体",del:"删除线",italic:"斜体",quote:"引用",ucwords:"将每个单词首字母转成大写",uppercase:"将所选转换成大写",lowercase:"将所选转换成小写",h1:"标题1",h2:"标题2",h3:"标题3",h4:"标题4",h5:"标题5",h6:"标题6","list-ul":"无序列表","list-ol":"有序列表",hr:"横线",link:"链接","reference-link":"引用链接",image:"添加图片",code:"行内代码","preformatted-text":"预格式文本 / 代码块（缩进风格）","code-block":"代码块（多语言风格）",table:"添加表格",datetime:"日期时间",emoji:"Emoji表情","html-entities":"HTML实体字符",pagebreak:"插入分页符","goto-line":"跳转到行",watch:"关闭实时预览",unwatch:"开启实时预览",preview:"全窗口预览HTML（按 Shift + ESC还原）",fullscreen:"全屏（按ESC还原）",clear:"清空",search:"搜索",help:"使用帮助",info:"关于"+r.title},buttons:{enter:"确定",cancel:"取消",close:"关闭"},dialog:{link:{title:"添加链接",url:"链接地址",urlTitle:"链接标题",urlEmpty:"错误：请填写链接地址。"},referenceLink:{title:"添加引用链接",name:"引用名称",url:"链接地址",urlId:"链接ID",urlTitle:"链接标题",nameEmpty:"错误：引用链接的名称不能为空。",idEmpty:"错误：请填写引用链接的ID。",urlEmpty:"错误：请填写引用链接的URL地址。"},image:{title:"添加图片",url:"图片地址",link:"图片链接",alt:"图片描述",uploadButton:"本地上传",imageURLEmpty:"错误：图片地址不能为空。",uploadFileEmpty:"错误：上传的图片不能为空。",formatNotAllowed:"错误：只允许上传图片文件，允许上传的图片文件格式有："},preformattedText:{title:"添加预格式文本或代码块",emptyAlert:"错误：请填写预格式文本或代码的内容。"},codeBlock:{title:"添加代码块",selectLabel:"代码语言：",selectDefaultText:"请选择代码语言",otherLanguage:"其他语言",unselectedLanguageAlert:"错误：请选择代码所属的语言类型。",codeEmptyAlert:"错误：请填写代码内容。"},htmlEntities:{title:"HTML 实体字符"},help:{title:"使用帮助"}}}},r.classNames={tex:r.classPrefix+"tex"},r.dialogZindex=99999,r.$katex=null,r.$marked=null,r.$CodeMirror=null,r.$prettyPrint=null;var P,E;r.prototype=r.fn={state:{watching:!1,loaded:!1,preview:!1,fullscreen:!1},init:function(e,t){t=t||{},typeof e=="object"&&(t=e);var i=this.classPrefix=r.classPrefix,o=this.settings=a.extend(!0,r.defaults,t);e=typeof e=="object"?o.id:e;var n=this.editor=a("#"+e);this.id=e,this.lang=o.lang;var h=this.classNames={textarea:{html:i+"html-textarea",markdown:i+"markdown-textarea"}};o.pluginPath=o.pluginPath===""?o.path+"../plugins/":o.pluginPath,this.state.watching=!!o.watch,n.hasClass("editormd")||n.addClass("editormd"),n.css({width:typeof o.width=="number"?o.width+"px":o.width,height:typeof o.height=="number"?o.height+"px":o.height}),o.autoHeight&&n.css("height","auto");var c=this.markdownTextarea=n.children("textarea");c.length<1&&(n.append("<textarea></textarea>"),c=this.markdownTextarea=n.children("textarea")),c.addClass(h.textarea.markdown).attr("placeholder",o.placeholder),(typeof c.attr("name")>"u"||c.attr("name")==="")&&c.attr("name",o.name!==""?o.name:e+"-markdown-doc");var d=[o.readOnly?"":'<a href="javascript:;" class="fa fa-close '+i+'preview-close-btn"></a>',o.saveHTMLToTextarea?'<textarea class="'+h.textarea.html+'" name="'+e+'-html-code"></textarea>':"",'<div class="'+i+'preview"><div class="markdown-body '+i+'preview-container"></div></div>','<div class="'+i+'container-mask" style="display:block;"></div>','<div class="'+i+'mask"></div>'].join(`
`);return n.append(d).addClass(i+"vertical"),o.theme!==""&&n.addClass(i+"theme-"+o.theme),this.mask=n.children("."+i+"mask"),this.containerMask=n.children("."+i+"container-mask"),o.markdown!==""&&c.val(o.markdown),o.appendMarkdown!==""&&c.val(c.val()+o.appendMarkdown),this.htmlTextarea=n.children("."+h.textarea.html),this.preview=n.children("."+i+"preview"),this.previewContainer=this.preview.children("."+i+"preview-container"),o.previewTheme!==""&&this.preview.addClass(i+"preview-theme-"+o.previewTheme),typeof define=="function"&&define.amd&&(typeof katex<"u"&&(r.$katex=katex),o.searchReplace&&!o.readOnly&&(r.loadCSS(o.path+"codemirror/addon/dialog/dialog"),r.loadCSS(o.path+"codemirror/addon/search/matchesonscrollbar"))),typeof define=="function"&&define.amd||!o.autoLoadModules?(typeof CodeMirror<"u"&&(r.$CodeMirror=CodeMirror),typeof marked<"u"&&(r.$marked=marked),this.setCodeMirror().setToolbar().loadedDisplay()):this.loadQueues(),this},loadQueues:function(){var e=this,t=this.settings,i=t.path,o=function(){return r.isIE8?void e.loadedDisplay():void(t.flowChart||t.sequenceDiagram?r.loadScript(i+"raphael.min",function(){r.loadScript(i+"underscore.min",function(){!t.flowChart&&t.sequenceDiagram?r.loadScript(i+"sequence-diagram.min",function(){e.loadedDisplay()}):t.flowChart&&!t.sequenceDiagram?r.loadScript(i+"flowchart.min",function(){r.loadScript(i+"jquery.flowchart.min",function(){e.loadedDisplay()})}):t.flowChart&&t.sequenceDiagram&&r.loadScript(i+"flowchart.min",function(){r.loadScript(i+"jquery.flowchart.min",function(){r.loadScript(i+"sequence-diagram.min",function(){e.loadedDisplay()})})})})}):e.loadedDisplay())};return r.loadCSS(i+"codemirror/codemirror.min"),t.searchReplace&&!t.readOnly&&(r.loadCSS(i+"codemirror/addon/dialog/dialog"),r.loadCSS(i+"codemirror/addon/search/matchesonscrollbar")),t.codeFold&&r.loadCSS(i+"codemirror/addon/fold/foldgutter"),r.loadScript(i+"codemirror/codemirror.min",function(){r.$CodeMirror=CodeMirror,r.loadScript(i+"codemirror/modes.min",function(){r.loadScript(i+"codemirror/addons.min",function(){return e.setCodeMirror(),t.mode!=="gfm"&&t.mode!=="markdown"?(e.loadedDisplay(),!1):(e.setToolbar(),void r.loadScript(i+"marked.min",function(){r.$marked=marked,t.previewCodeHighlight?r.loadScript(i+"prettify.min",function(){o()}):o()}))})})}),this},setTheme:function(e){var t=this.editor,i=this.settings.theme,o=this.classPrefix+"theme-";return t.removeClass(o+i).addClass(o+e),this.settings.theme=e,this},setEditorTheme:function(e){var t=this.settings;return t.editorTheme=e,e!=="default"&&r.loadCSS(t.path+"codemirror/theme/"+t.editorTheme),this.cm.setOption("theme",e),this},setCodeMirrorTheme:function(e){return this.setEditorTheme(e),this},setPreviewTheme:function(e){var t=this.preview,i=this.settings.previewTheme,o=this.classPrefix+"preview-theme-";return t.removeClass(o+i).addClass(o+e),this.settings.previewTheme=e,this},setCodeMirror:function(){var e=this.settings,t=this.editor;e.editorTheme!=="default"&&r.loadCSS(e.path+"codemirror/theme/"+e.editorTheme);var i={mode:e.mode,theme:e.editorTheme,tabSize:e.tabSize,dragDrop:!1,autofocus:e.autoFocus,autoCloseTags:e.autoCloseTags,readOnly:e.readOnly?"nocursor":!1,indentUnit:e.indentUnit,lineNumbers:e.lineNumbers,lineWrapping:e.lineWrapping,extraKeys:{"Ctrl-Q":function(o){o.foldCode(o.getCursor())}},foldGutter:e.codeFold,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:e.matchBrackets,indentWithTabs:e.indentWithTabs,styleActiveLine:e.styleActiveLine,styleSelectedText:e.styleSelectedText,autoCloseBrackets:e.autoCloseBrackets,showTrailingSpace:e.showTrailingSpace,highlightSelectionMatches:e.matchWordHighlight?{showToken:e.matchWordHighlight==="onselected"?!1:/\w/}:!1};return this.codeEditor=this.cm=r.$CodeMirror.fromTextArea(this.markdownTextarea[0],i),this.codeMirror=this.cmElement=t.children(".CodeMirror"),e.value!==""&&this.cm.setValue(e.value),this.codeMirror.css({fontSize:e.fontSize,width:e.watch?"50%":"100%"}),e.autoHeight&&(this.codeMirror.css("height","auto"),this.cm.setOption("viewportMargin",1/0)),e.lineNumbers||this.codeMirror.find(".CodeMirror-gutters").css("border-right","none"),this},getCodeMirrorOption:function(e){return this.cm.getOption(e)},setCodeMirrorOption:function(e,t){return this.cm.setOption(e,t),this},addKeyMap:function(e,t){return this.cm.addKeyMap(e,t),this},removeKeyMap:function(e){return this.cm.removeKeyMap(e),this},gotoLine:function(e){var t=this.settings;if(!t.gotoLine)return this;var i=this.cm,o=(this.editor,i.lineCount()),n=this.preview;if(typeof e=="string"&&(e==="last"&&(e=o),e==="first"&&(e=1)),typeof e!="number")return alert("Error: The line number must be an integer."),this;if(e=parseInt(e)-1,e>o)return alert("Error: The line number range 1-"+o),this;i.setCursor({line:e,ch:0});var h=i.getScrollInfo(),c=h.clientHeight,d=i.charCoords({line:e,ch:0},"local");if(i.scrollTo(null,(d.top+d.bottom-c)/2),t.watch){var u=this.codeMirror.find(".CodeMirror-scroll")[0],s=a(u).height(),p=u.scrollTop,f=p/u.scrollHeight;n.scrollTop(p===0?0:p+s>=u.scrollHeight-16?n[0].scrollHeight:n[0].scrollHeight*f)}return i.focus(),this},extend:function(){return typeof arguments[1]<"u"&&(typeof arguments[1]=="function"&&(arguments[1]=a.proxy(arguments[1],this)),this[arguments[0]]=arguments[1]),typeof arguments[0]=="object"&&typeof arguments[0].length>"u"&&a.extend(!0,this,arguments[0]),this},set:function(e,t){return typeof t<"u"&&typeof t=="function"&&(t=a.proxy(t,this)),this[e]=t,this},config:function(e,t){var i=this.settings;return typeof e=="object"&&(i=a.extend(!0,i,e)),typeof e=="string"&&(i[e]=t),this.settings=i,this.recreate(),this},on:function(e,t){var i=this.settings;return typeof i["on"+e]<"u"&&(i["on"+e]=a.proxy(t,this)),this},off:function(e){var t=this.settings;return typeof t["on"+e]<"u"&&(t["on"+e]=function(){}),this},showToolbar:function(e){var t=this.settings;return t.readOnly?this:(t.toolbar&&(this.toolbar.length<1||this.toolbar.find("."+this.classPrefix+"menu").html()==="")&&this.setToolbar(),t.toolbar=!0,this.toolbar.show(),this.resize(),a.proxy(e||function(){},this)(),this)},hideToolbar:function(e){var t=this.settings;return t.toolbar=!1,this.toolbar.hide(),this.resize(),a.proxy(e||function(){},this)(),this},setToolbarAutoFixed:function(e){var t=this.state,i=this.editor,o=this.toolbar,n=this.settings;typeof e<"u"&&(n.toolbarAutoFixed=e);var h=function(){var c=a(window),d=c.scrollTop();return n.toolbarAutoFixed?void o.css(d-i.offset().top>10&&d<i.height()?{position:"fixed",width:i.width()+"px",left:(c.width()-i.width())/2+"px"}:{position:"absolute",width:"100%",left:0}):!1};return!t.fullscreen&&!t.preview&&n.toolbar&&n.toolbarAutoFixed&&a(window).bind("scroll",h),this},setToolbar:function(){var e=this.settings;if(e.readOnly)return this;var t=this.editor,i=(this.preview,this.classPrefix),o=this.toolbar=t.children("."+i+"toolbar");if(e.toolbar&&o.length<1){var n='<div class="'+i+'toolbar"><div class="'+i+'toolbar-container"><ul class="'+i+'menu"></ul></div></div>';t.append(n),o=this.toolbar=t.children("."+i+"toolbar")}if(!e.toolbar)return o.hide(),this;o.show();for(var h=typeof e.toolbarIcons=="function"?e.toolbarIcons():typeof e.toolbarIcons=="string"?r.toolbarModes[e.toolbarIcons]:e.toolbarIcons,c=o.find("."+this.classPrefix+"menu"),d="",u=!1,s=0,p=h.length;p>s;s++){var f=h[s];if(f==="||")u=!0;else if(f==="|")d+='<li class="divider" unselectable="on">|</li>';else{var m=/h(\d)/.test(f),v=f;f!=="watch"||e.watch||(v="unwatch");var b=e.lang.toolbar[v],l=e.toolbarIconTexts[v],g=e.toolbarIconsClass[v];b=typeof b>"u"?"":b,l=typeof l>"u"?"":l,g=typeof g>"u"?"":g;var w=u?'<li class="pull-right">':"<li>";typeof e.toolbarCustomIcons[f]<"u"&&typeof e.toolbarCustomIcons[f]!="function"?w+=e.toolbarCustomIcons[f]:(w+='<a href="javascript:;" title="'+b+'" unselectable="on">',w+='<i class="fa '+g+'" name="'+f+'" unselectable="on">'+(m?f.toUpperCase():g===""?l:"")+"</i>",w+="</a>"),w+="</li>",d=u?w+d:d+w}}return c.html(d),c.find('[title="Lowercase"]').attr("title",e.lang.toolbar.lowercase),c.find('[title="ucwords"]').attr("title",e.lang.toolbar.ucwords),this.setToolbarHandler(),this.setToolbarAutoFixed(),this},dialogLockScreen:function(){return a.proxy(r.dialogLockScreen,this)(),this},dialogShowMask:function(e){return a.proxy(r.dialogShowMask,this)(e),this},getToolbarHandles:function(e){var t=this.toolbarHandlers=r.toolbarHandlers;return e&&typeof toolbarIconHandlers[e]<"u"?t[e]:t},setToolbarHandler:function(){var e=this,t=this.settings;if(!t.toolbar||t.readOnly)return this;var i=this.toolbar,o=this.cm,n=this.classPrefix,h=this.toolbarIcons=i.find("."+n+"menu > li > a"),c=this.getToolbarHandles();return h.bind(r.mouseOrTouch("click","touchend"),function(d){var u=a(this).children(".fa"),s=u.attr("name"),p=o.getCursor(),f=o.getSelection();return s!==""?(e.activeIcon=u,typeof c[s]<"u"?a.proxy(c[s],e)(o):typeof t.toolbarHandlers[s]<"u"&&a.proxy(t.toolbarHandlers[s],e)(o,u,p,f),s!=="link"&&s!=="reference-link"&&s!=="image"&&s!=="code-block"&&s!=="preformatted-text"&&s!=="watch"&&s!=="preview"&&s!=="search"&&s!=="fullscreen"&&s!=="info"&&o.focus(),!1):void 0}),this},createDialog:function(e){return a.proxy(r.createDialog,this)(e)},createInfoDialog:function(){var e=this,t=this.editor,i=this.classPrefix,o=['<div class="'+i+"dialog "+i+'dialog-info" style="">','<div class="'+i+'dialog-container">','<h1><i class="editormd-logo editormd-logo-lg editormd-logo-color"></i> '+r.title+"<small>v"+r.version+"</small></h1>","<p>"+this.lang.description+"</p>",'<p style="margin: 10px 0 20px 0;"><a href="'+r.homePage+'" target="_blank">'+r.homePage+' <i class="fa fa-external-link"></i></a></p>','<p style="font-size: 0.85em;">Copyright &copy; 2015 <a href="https://github.com/pandao" target="_blank" class="hover-link">Pandao</a>, The <a href="https://github.com/pandao/editor.md/blob/master/LICENSE" target="_blank" class="hover-link">MIT</a> License.</p>',"</div>",'<a href="javascript:;" class="fa fa-close '+i+'dialog-close"></a>',"</div>"].join(`
`);t.append(o);var n=this.infoDialog=t.children("."+i+"dialog-info");return n.find("."+i+"dialog-close").bind(r.mouseOrTouch("click","touchend"),function(){e.hideInfoDialog()}),n.css("border",r.isIE8?"1px solid #ddd":"").css("z-index",r.dialogZindex).show(),this.infoDialogPosition(),this},infoDialogPosition:function(){var e=this.infoDialog,t=function(){e.css({top:(a(window).height()-e.height())/2+"px",left:(a(window).width()-e.width())/2+"px"})};return t(),a(window).resize(t),this},showInfoDialog:function(){a("html,body").css("overflow-x","hidden");var e=this.editor,t=this.settings,i=this.infoDialog=e.children("."+this.classPrefix+"dialog-info");return i.length<1&&this.createInfoDialog(),this.lockScreen(!0),this.mask.css({opacity:t.dialogMaskOpacity,backgroundColor:t.dialogMaskBgColor}).show(),i.css("z-index",r.dialogZindex).show(),this.infoDialogPosition(),this},hideInfoDialog:function(){return a("html,body").css("overflow-x",""),this.infoDialog.hide(),this.mask.hide(),this.lockScreen(!1),this},lockScreen:function(e){return r.lockScreen(e),this.resize(),this},recreate:function(){var e=this.editor,t=this.settings;return this.codeMirror.remove(),this.setCodeMirror(),t.readOnly||(e.find(".editormd-dialog").length>0&&e.find(".editormd-dialog").remove(),t.toolbar&&(this.getToolbarHandles(),this.setToolbar())),this.loadedDisplay(!0),this},previewCodeHighlight:function(){var e=this.settings,t=this.previewContainer;return e.previewCodeHighlight&&(t.find("pre").addClass("prettyprint linenums"),typeof prettyPrint<"u"&&prettyPrint()),this},katexRender:function(){return P===null?this:(this.previewContainer.find("."+r.classNames.tex).each(function(){var e=a(this);r.$katex.render(e.text(),e[0]),e.find(".katex").css("font-size","1.6em")}),this)},flowChartAndSequenceDiagramRender:function(){var e=this,t=this.settings,i=this.previewContainer;if(r.isIE8)return this;if(t.flowChart){if(E===null)return this;i.find(".flowchart").flowChart()}t.sequenceDiagram&&i.find(".sequence-diagram").sequenceDiagram({theme:"simple"});var o=e.preview,n=e.codeMirror,h=n.find(".CodeMirror-scroll"),c=h.height(),d=h.scrollTop(),u=d/h[0].scrollHeight,s=0;o.find(".markdown-toc-list").each(function(){s+=a(this).height()});var p=o.find(".editormd-toc-menu").height();return p=p||0,o.scrollTop(d===0?0:d+c>=h[0].scrollHeight-16?o[0].scrollHeight:(o[0].scrollHeight+s+p)*u),this},registerKeyMaps:function(e){var t=this,i=this.cm,o=this.settings,n=r.toolbarHandlers,h=o.disabledKeyMaps;if(e=e||null){for(var c in e)if(a.inArray(c,h)<0){var d={};d[c]=e[c],i.addKeyMap(e)}}else{for(var u in r.keyMaps){var s=r.keyMaps[u],p=typeof s=="string"?a.proxy(n[s],t):a.proxy(s,t);if(a.inArray(u,["F9","F10","F11"])<0&&a.inArray(u,h)<0){var f={};f[u]=p,i.addKeyMap(f)}}a(window).keydown(function(m){var v={120:"F9",121:"F10",122:"F11"};if(a.inArray(v[m.keyCode],h)<0)switch(m.keyCode){case 120:return a.proxy(n.watch,t)(),!1;case 121:return a.proxy(n.preview,t)(),!1;case 122:return a.proxy(n.fullscreen,t)(),!1}})}return this},bindScrollEvent:function(){var e=this,t=this.preview,i=this.settings,o=this.codeMirror,n=r.mouseOrTouch;if(!i.syncScrolling)return this;var h=function(){o.find(".CodeMirror-scroll").bind(n("scroll","touchmove"),function(s){var p=a(this).height(),f=a(this).scrollTop(),m=f/a(this)[0].scrollHeight,v=0;t.find(".markdown-toc-list").each(function(){v+=a(this).height()});var b=t.find(".editormd-toc-menu").height();b=b||0,t.scrollTop(f===0?0:f+p>=a(this)[0].scrollHeight-16?t[0].scrollHeight:(t[0].scrollHeight+v+b)*m),a.proxy(i.onscroll,e)(s)})},c=function(){o.find(".CodeMirror-scroll").unbind(n("scroll","touchmove"))},d=function(){t.bind(n("scroll","touchmove"),function(s){var p=a(this).height(),f=a(this).scrollTop(),m=f/a(this)[0].scrollHeight,v=o.find(".CodeMirror-scroll");v.scrollTop(f===0?0:f+p>=a(this)[0].scrollHeight?v[0].scrollHeight:v[0].scrollHeight*m),a.proxy(i.onpreviewscroll,e)(s)})},u=function(){t.unbind(n("scroll","touchmove"))};return o.bind({mouseover:h,mouseout:c,touchstart:h,touchend:c}),i.syncScrolling==="single"?this:(t.bind({mouseover:d,mouseout:u,touchstart:d,touchend:u}),this)},bindChangeEvent:function(){var e=this,t=this.cm,i=this.settings;return i.syncScrolling?(t.on("change",function(o,n){i.watch&&e.previewContainer.css("padding",i.autoHeight?"20px 20px 50px 40px":"20px"),P=setTimeout(function(){clearTimeout(P),e.save(),P=null},i.delay)}),this):this},loadedDisplay:function(e){e=e||!1;var t=this,i=this.editor,o=this.preview,n=this.settings;return this.containerMask.hide(),this.save(),n.watch&&o.show(),i.data("oldWidth",i.width()).data("oldHeight",i.height()),this.resize(),this.registerKeyMaps(),a(window).resize(function(){t.resize()}),this.bindScrollEvent().bindChangeEvent(),e||a.proxy(n.onload,this)(),this.state.loaded=!0,this},width:function(e){return this.editor.css("width",typeof e=="number"?e+"px":e),this.resize(),this},height:function(e){return this.editor.css("height",typeof e=="number"?e+"px":e),this.resize(),this},resize:function(e,t){e=e||null,t=t||null;var i=this.state,o=this.editor,n=this.preview,h=this.toolbar,c=this.settings,d=this.codeMirror;if(e&&o.css("width",typeof e=="number"?e+"px":e),!c.autoHeight||i.fullscreen||i.preview?(t&&o.css("height",typeof t=="number"?t+"px":t),i.fullscreen&&o.height(a(window).height()),c.toolbar&&!c.readOnly?d.css("margin-top",h.height()+1).height(o.height()-h.height()):d.css("margin-top",0).height(o.height())):(o.css("height","auto"),d.css("height","auto")),c.watch)if(d.width(o.width()/2),n.width(i.preview?o.width():o.width()/2),this.previewContainer.css("padding",c.autoHeight?"20px 20px 50px 40px":"20px"),c.toolbar&&!c.readOnly?n.css("top",h.height()+1):n.css("top",0),!c.autoHeight||i.fullscreen||i.preview){var u=c.toolbar&&!c.readOnly?o.height()-h.height():o.height();n.height(u)}else n.height("");else d.width(o.width()),n.hide();return i.loaded&&a.proxy(c.onresize,this)(),this},save:function(){if(P===null)return this;var e=this,t=this.state,i=this.settings,o=this.cm,n=o.getValue(),h=this.previewContainer;if(i.mode!=="gfm"&&i.mode!=="markdown")return this.markdownTextarea.val(n),this;var c=r.$marked,d=this.markdownToC=[],u=this.markedRendererOptions={toc:i.toc,tocm:i.tocm,tocStartLevel:i.tocStartLevel,pageBreak:i.pageBreak,taskList:i.taskList,emoji:i.emoji,tex:i.tex,atLink:i.atLink,emailLink:i.emailLink,flowChart:i.flowChart,sequenceDiagram:i.sequenceDiagram,previewCodeHighlight:i.previewCodeHighlight},s=this.markedOptions={renderer:r.markedRenderer(d,u),gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!i.htmlDecode,smartLists:!0,smartypants:!0};c.setOptions(s);var p=r.$marked(n,s);if(p=r.filterHTMLTags(p,i.htmlDecode),this.markdownTextarea.text(n),o.save(),i.saveHTMLToTextarea&&this.htmlTextarea.text(p),i.watch||!i.watch&&t.preview){if(h.html(p),this.previewCodeHighlight(),i.toc){var f=i.tocContainer===""?h:a(i.tocContainer),m=f.find("."+this.classPrefix+"toc-menu");f.attr("previewContainer",i.tocContainer===""?"true":"false"),i.tocContainer!==""&&m.length>0&&m.remove(),r.markdownToCRenderer(d,f,i.tocDropdown,i.tocStartLevel),(i.tocDropdown||f.find("."+this.classPrefix+"toc-menu").length>0)&&r.tocDropdownMenu(f,i.tocTitle!==""?i.tocTitle:this.lang.tocTitle),i.tocContainer!==""&&h.find(".markdown-toc").css("border","none")}i.tex&&(!r.kaTeXLoaded&&i.autoLoadModules?r.loadKaTeX(function(){r.$katex=katex,r.kaTeXLoaded=!0,e.katexRender()}):(r.$katex=katex,this.katexRender())),(i.flowChart||i.sequenceDiagram)&&(E=setTimeout(function(){clearTimeout(E),e.flowChartAndSequenceDiagramRender(),E=null},10)),t.loaded&&a.proxy(i.onchange,this)()}return this},focus:function(){return this.cm.focus(),this},setCursor:function(e){return this.cm.setCursor(e),this},getCursor:function(){return this.cm.getCursor()},setSelection:function(e,t){return this.cm.setSelection(e,t),this},getSelection:function(){return this.cm.getSelection()},setSelections:function(e){return this.cm.setSelections(e),this},getSelections:function(){return this.cm.getSelections()},replaceSelection:function(e){return this.cm.replaceSelection(e),this},insertValue:function(e){return this.replaceSelection(e),this},appendMarkdown:function(e){var t=(this.settings,this.cm);return t.setValue(t.getValue()+e),this},setMarkdown:function(e){return this.cm.setValue(e||this.settings.markdown),this},getMarkdown:function(){return this.cm.getValue()},getValue:function(){return this.cm.getValue()},setValue:function(e){return this.cm.setValue(e),this},clear:function(){return this.cm.setValue(""),this},getHTML:function(){return this.settings.saveHTMLToTextarea?this.htmlTextarea.val():(alert("Error: settings.saveHTMLToTextarea == false"),!1)},getTextareaSavedHTML:function(){return this.getHTML()},getPreviewedHTML:function(){return this.settings.watch?this.previewContainer.html():(alert("Error: settings.watch == false"),!1)},watch:function(e){var t=this.settings;if(a.inArray(t.mode,["gfm","markdown"])<0)return this;if(this.state.watching=t.watch=!0,this.preview.show(),this.toolbar){var i=t.toolbarIconsClass.watch,o=t.toolbarIconsClass.unwatch,n=this.toolbar.find(".fa[name=watch]");n.parent().attr("title",t.lang.toolbar.watch),n.removeClass(o).addClass(i)}return this.codeMirror.css("border-right","1px solid #ddd").width(this.editor.width()/2),P=0,this.save().resize(),t.onwatch||(t.onwatch=e||function(){}),a.proxy(t.onwatch,this)(),this},unwatch:function(e){var t=this.settings;if(this.state.watching=t.watch=!1,this.preview.hide(),this.toolbar){var i=t.toolbarIconsClass.watch,o=t.toolbarIconsClass.unwatch,n=this.toolbar.find(".fa[name=watch]");n.parent().attr("title",t.lang.toolbar.unwatch),n.removeClass(i).addClass(o)}return this.codeMirror.css("border-right","none").width(this.editor.width()),this.resize(),t.onunwatch||(t.onunwatch=e||function(){}),a.proxy(t.onunwatch,this)(),this},show:function(e){e=e||function(){};var t=this;return this.editor.show(0,function(){a.proxy(e,t)()}),this},hide:function(e){e=e||function(){};var t=this;return this.editor.hide(0,function(){a.proxy(e,t)()}),this},previewing:function(){var e=this,t=this.editor,i=this.preview,o=this.toolbar,n=this.settings,h=this.codeMirror,c=this.previewContainer;if(a.inArray(n.mode,["gfm","markdown"])<0)return this;n.toolbar&&o&&(o.toggle(),o.find(".fa[name=preview]").toggleClass("active")),h.toggle();var d=function(u){u.shiftKey&&u.keyCode===27&&e.previewed()};h.css("display")==="none"?(this.state.preview=!0,this.state.fullscreen&&i.css("background","#fff"),t.find("."+this.classPrefix+"preview-close-btn").show().bind(r.mouseOrTouch("click","touchend"),function(){e.previewed()}),n.watch?c.css("padding",""):this.save(),c.addClass(this.classPrefix+"preview-active"),i.show().css({position:"",top:0,width:t.width(),height:n.autoHeight&&!this.state.fullscreen?"auto":t.height()}),this.state.loaded&&a.proxy(n.onpreviewing,this)(),a(window).bind("keyup",d)):(a(window).unbind("keyup",d),this.previewed())},previewed:function(){var e=this.editor,t=this.preview,i=this.toolbar,o=this.settings,n=this.previewContainer,h=e.find("."+this.classPrefix+"preview-close-btn");return this.state.preview=!1,this.codeMirror.show(),o.toolbar&&i.show(),t[o.watch?"show":"hide"](),h.hide().unbind(r.mouseOrTouch("click","touchend")),n.removeClass(this.classPrefix+"preview-active"),o.watch&&n.css("padding","20px"),t.css({background:null,position:"absolute",width:e.width()/2,height:o.autoHeight&&!this.state.fullscreen?"auto":e.height()-i.height(),top:o.toolbar?i.height():0}),this.state.loaded&&a.proxy(o.onpreviewed,this)(),this},fullscreen:function(){var e=this,t=this.state,i=this.editor,o=(this.preview,this.toolbar),n=this.settings,h=this.classPrefix+"fullscreen";o&&o.find(".fa[name=fullscreen]").parent().toggleClass("active");var c=function(d){d.shiftKey||d.keyCode!==27||t.fullscreen&&e.fullscreenExit()};return i.hasClass(h)?(a(window).unbind("keyup",c),this.fullscreenExit()):(t.fullscreen=!0,a("html,body").css("overflow","hidden"),i.css({width:a(window).width(),height:a(window).height()}).addClass(h),this.resize(),a.proxy(n.onfullscreen,this)(),a(window).bind("keyup",c)),this},fullscreenExit:function(){var e=this.editor,t=this.settings,i=this.toolbar,o=this.classPrefix+"fullscreen";return this.state.fullscreen=!1,i&&i.find(".fa[name=fullscreen]").parent().removeClass("active"),a("html,body").css("overflow",""),e.css({width:e.data("oldWidth"),height:e.data("oldHeight")}).removeClass(o),this.resize(),a.proxy(t.onfullscreenExit,this)(),this},executePlugin:function(e,t){var i=this,o=this.cm,n=this.settings;return t=n.pluginPath+t,typeof define=="function"?typeof this[e]>"u"?(alert("Error: "+e+" plugin is not found, you are not load this plugin."),this):(this[e](o),this):(a.inArray(t,r.loadFiles.plugin)<0?r.loadPlugin(t,function(){r.loadPlugins[e]=i[e],i[e](o)}):a.proxy(r.loadPlugins[e],this)(o),this)},search:function(e){var t=this.settings;return t.searchReplace?(t.readOnly||this.cm.execCommand(e||"find"),this):(alert("Error: settings.searchReplace == false"),this)},searchReplace:function(){return this.search("replace"),this},searchReplaceAll:function(){return this.search("replaceAll"),this}},r.fn.init.prototype=r.fn,r.dialogLockScreen=function(){var e=this.settings||{dialogLockScreen:!0};e.dialogLockScreen&&(a("html,body").css("overflow","hidden"),this.resize())},r.dialogShowMask=function(e){var t=this.editor,i=this.settings||{dialogShowMask:!0};e.css({top:(a(window).height()-e.height())/2+"px",left:(a(window).width()-e.width())/2+"px"}),i.dialogShowMask&&t.children("."+this.classPrefix+"mask").css("z-index",parseInt(e.css("z-index"))-1).show()},r.toolbarHandlers={undo:function(){this.cm.undo()},redo:function(){this.cm.redo()},bold:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("**"+i+"**"),i===""&&e.setCursor(t.line,t.ch+2)},del:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("~~"+i+"~~"),i===""&&e.setCursor(t.line,t.ch+2)},italic:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("*"+i+"*"),i===""&&e.setCursor(t.line,t.ch+1)},quote:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("> "+i),e.setCursor(t.line,t.ch+2)):e.replaceSelection("> "+i)},ucfirst:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(r.firstUpperCase(t)),e.setSelections(i)},ucwords:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(r.wordsFirstUpperCase(t)),e.setSelections(i)},uppercase:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(t.toUpperCase()),e.setSelections(i)},lowercase:function(){var e=this.cm,t=(e.getCursor(),e.getSelection()),i=e.listSelections();e.replaceSelection(t.toLowerCase()),e.setSelections(i)},h1:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("# "+i),e.setCursor(t.line,t.ch+2)):e.replaceSelection("# "+i)},h2:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("## "+i),e.setCursor(t.line,t.ch+3)):e.replaceSelection("## "+i)},h3:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("### "+i),e.setCursor(t.line,t.ch+4)):e.replaceSelection("### "+i)},h4:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("#### "+i),e.setCursor(t.line,t.ch+5)):e.replaceSelection("#### "+i)},h5:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("##### "+i),e.setCursor(t.line,t.ch+6)):e.replaceSelection("##### "+i)},h6:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();t.ch!==0?(e.setCursor(t.line,0),e.replaceSelection("###### "+i),e.setCursor(t.line,t.ch+7)):e.replaceSelection("###### "+i)},"list-ul":function(){var e=this.cm,t=(e.getCursor(),e.getSelection());if(t==="")e.replaceSelection("- "+t);else{for(var i=t.split(`
`),o=0,n=i.length;n>o;o++)i[o]=i[o]===""?"":"- "+i[o];e.replaceSelection(i.join(`
`))}},"list-ol":function(){var e=this.cm,t=(e.getCursor(),e.getSelection());if(t==="")e.replaceSelection("1. "+t);else{for(var i=t.split(`
`),o=0,n=i.length;n>o;o++)i[o]=i[o]===""?"":o+1+". "+i[o];e.replaceSelection(i.join(`
`))}},hr:function(){{var e=this.cm,t=e.getCursor();e.getSelection()}e.replaceSelection((t.ch!==0?`

`:`
`)+`------------

`)},tex:function(){if(!this.settings.tex)return alert("settings.tex === false"),this;var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("$$"+i+"$$"),i===""&&e.setCursor(t.line,t.ch+2)},link:function(){this.executePlugin("linkDialog","link-dialog/link-dialog")},"reference-link":function(){this.executePlugin("referenceLinkDialog","reference-link-dialog/reference-link-dialog")},pagebreak:function(){if(!this.settings.pageBreak)return alert("settings.pageBreak === false"),this;{var e=this.cm;e.getSelection()}e.replaceSelection(`\r
[========]\r
`)},image:function(){this.executePlugin("imageDialog","image-dialog/image-dialog")},code:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("`"+i+"`"),i===""&&e.setCursor(t.line,t.ch+1)},"code-block":function(){this.executePlugin("codeBlockDialog","code-block-dialog/code-block-dialog")},"preformatted-text":function(){this.executePlugin("preformattedTextDialog","preformatted-text-dialog/preformatted-text-dialog")},table:function(){this.executePlugin("tableDialog","table-dialog/table-dialog")},datetime:function(){var e=this.cm,t=(e.getSelection(),this.settings.lang.name),i=r.dateFormat()+" "+r.dateFormat(t==="zh-cn"||t==="zh-tw"?"cn-week-day":"week-day");e.replaceSelection(i)},emoji:function(){this.executePlugin("emojiDialog","emoji-dialog/emoji-dialog")},"html-entities":function(){this.executePlugin("htmlEntitiesDialog","html-entities-dialog/html-entities-dialog")},"goto-line":function(){this.executePlugin("gotoLineDialog","goto-line-dialog/goto-line-dialog")},watch:function(){this[this.settings.watch?"unwatch":"watch"]()},preview:function(){this.previewing()},fullscreen:function(){this.fullscreen()},clear:function(){this.clear()},search:function(){this.search()},help:function(){this.executePlugin("helpDialog","help-dialog/help-dialog")},info:function(){this.showInfoDialog()}},r.keyMaps={"Ctrl-1":"h1","Ctrl-2":"h2","Ctrl-3":"h3","Ctrl-4":"h4","Ctrl-5":"h5","Ctrl-6":"h6","Ctrl-B":"bold","Ctrl-D":"datetime","Ctrl-E":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();return this.settings.emoji?(e.replaceSelection(":"+i+":"),void(i===""&&e.setCursor(t.line,t.ch+1))):void alert("Error: settings.emoji == false")},"Ctrl-Alt-G":"goto-line","Ctrl-H":"hr","Ctrl-I":"italic","Ctrl-K":"code","Ctrl-L":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection(),o=i===""?"":' "'+i+'"';e.replaceSelection("["+i+"]("+o+")"),i===""&&e.setCursor(t.line,t.ch+1)},"Ctrl-U":"list-ul","Shift-Ctrl-A":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();return this.settings.atLink?(e.replaceSelection("@"+i),void(i===""&&e.setCursor(t.line,t.ch+1))):void alert("Error: settings.atLink == false")},"Shift-Ctrl-C":"code","Shift-Ctrl-Q":"quote","Shift-Ctrl-S":"del","Shift-Ctrl-K":"tex","Shift-Alt-C":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection(["```",i,"```"].join(`
`)),i===""&&e.setCursor(t.line,t.ch+3)},"Shift-Ctrl-Alt-C":"code-block","Shift-Ctrl-H":"html-entities","Shift-Alt-H":"help","Shift-Ctrl-E":"emoji","Shift-Ctrl-U":"uppercase","Shift-Alt-U":"ucwords","Shift-Ctrl-Alt-U":"ucfirst","Shift-Alt-L":"lowercase","Shift-Ctrl-I":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection(),o=i===""?"":' "'+i+'"';e.replaceSelection("!["+i+"]("+o+")"),i===""&&e.setCursor(t.line,t.ch+4)},"Shift-Ctrl-Alt-I":"image","Shift-Ctrl-L":"link","Shift-Ctrl-O":"list-ol","Shift-Ctrl-P":"preformatted-text","Shift-Ctrl-T":"table","Shift-Alt-P":"pagebreak",F9:"watch",F10:"preview",F11:"fullscreen"};var q=function(e){return String.prototype.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};r.trim=q;var R=function(e){return e.toLowerCase().replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})};r.ucwords=r.wordsFirstUpperCase=R;var B=function(e){return e.toLowerCase().replace(/\b(\w)/,function(t){return t.toUpperCase()})};return r.firstUpperCase=r.ucfirst=B,r.urls={atLinkBase:"https://github.com/"},r.regexs={atLink:/@(\w+)/g,email:/(\w+)@(\w+)\.(\w+)\.?(\w+)?/g,emailLink:/(mailto:)?([\w\.\_]+)@(\w+)\.(\w+)\.?(\w+)?/g,emoji:/:([\w\+-]+):/g,emojiDatetime:/(\d{2}:\d{2}:\d{2})/g,twemoji:/:(tw-([\w]+)-?(\w+)?):/g,fontAwesome:/:(fa-([\w]+)(-(\w+)){0,}):/g,editormdLogo:/:(editormd-logo-?(\w+)?):/g,pageBreak:/^\[[=]{8,}\]$/},r.emoji={path:"http://www.emoji-cheat-sheet.com/graphics/emojis/",ext:".png"},r.twemoji={path:"http://twemoji.maxcdn.com/36x36/",ext:".png"},r.markedRenderer=function(e,t){var i={toc:!0,tocm:!1,tocStartLevel:1,pageBreak:!0,atLink:!0,emailLink:!0,taskList:!1,emoji:!1,tex:!1,flowChart:!1,sequenceDiagram:!1},o=a.extend(i,t||{}),n=r.$marked,h=new n.Renderer;e=e||[];var c=r.regexs,d=c.atLink,u=c.emoji,s=c.email,p=c.emailLink,f=c.twemoji,m=c.fontAwesome,v=c.editormdLogo,b=c.pageBreak;return h.emoji=function(l){l=l.replace(r.regexs.emojiDatetime,function(x){return x.replace(/:/g,"&#58;")});var g=l.match(u);if(!g||!o.emoji)return l;for(var w=0,y=g.length;y>w;w++)g[w]===":+1:"&&(g[w]=":\\+1:"),l=l.replace(new RegExp(g[w]),function(x,M){var k=x.match(m),C=x.replace(/:/g,"");if(k)for(var S=0,L=k.length;L>S;S++){var T=k[S].replace(/:/g,"");return'<i class="fa '+T+' fa-emoji" title="'+T.replace("fa-","")+'"></i>'}else{var j=x.match(v),D=x.match(f);if(j)for(var I=0,U=j.length;U>I;I++){var F=j[I].replace(/:/g,"");return'<i class="'+F+'" title="Editor.md logo ('+F+')"></i>'}else{if(!D){var H=C==="+1"?"plus1":C;return H=H==="black_large_square"?"black_square":H,H=H==="moon"?"waxing_gibbous_moon":H,'<img src="'+r.emoji.path+H+r.emoji.ext+'" class="emoji" title="&#58;'+C+'&#58;" alt="&#58;'+C+'&#58;" />'}for(var $=0,K=D.length;K>$;$++){var z=D[$].replace(/:/g,"").replace("tw-","");return'<img src="'+r.twemoji.path+z+r.twemoji.ext+'" title="twemoji-'+z+'" alt="twemoji-'+z+'" class="emoji twemoji" />'}}}});return l},h.atLink=function(l){return d.test(l)&&(o.atLink&&(l=l.replace(s,function(g,w,y,x){return g.replace(/@/g,"_#_&#64;_#_")}),l=l.replace(d,function(g,w){return'<a href="'+r.urls.atLinkBase+w+'" title="&#64;'+w+'" class="at-link">'+g+"</a>"}).replace(/_#_&#64;_#_/g,"@")),o.emailLink&&(l=l.replace(p,function(g,w,y,x,M){return!w&&a.inArray(M,"jpg|jpeg|png|gif|webp|ico|icon|pdf".split("|"))<0?'<a href="mailto:'+g+'">'+g+"</a>":g}))),l},h.link=function(l,g,w){if(this.options.sanitize){try{var y=decodeURIComponent(unescape(l)).replace(/[^\w:]/g,"").toLowerCase()}catch{return""}if(y.indexOf("javascript:")===0)return""}var x='<a href="'+l+'"';return d.test(g)||d.test(w)?(g&&(x+=' title="'+g.replace(/@/g,"&#64;")),x+'">'+w.replace(/@/g,"&#64;")+"</a>"):(g&&(x+=' title="'+g+'"'),x+=">"+w+"</a>")},h.heading=function(l,g,w){var y=l,x=/\s*\<a\s*href\=\"(.*)\"\s*([^\>]*)\>(.*)\<\/a\>\s*/;if(x.test(l)){var M=[];l=l.split(/\<a\s*([^\>]+)\>([^\>]*)\<\/a\>/);for(var k=0,C=l.length;C>k;k++)M.push(l[k].replace(/\s*href\=\"(.*)\"\s*/g,""));l=M.join(" ")}l=q(l);var S=l.toLowerCase().replace(/[^\w]+/g,"-"),L={text:l,level:g,slug:S},T=/^[\u4e00-\u9fa5]+$/.test(l),j=T?escape(l).replace(/\%/g,""):l.toLowerCase().replace(/[^\w]+/g,"-");e.push(L);var D="<h"+g+' id="h'+g+"-"+this.options.headerPrefix+j+'">';return D+='<a name="'+l+'" class="reference-link"></a>',D+='<span class="header-link octicon octicon-link"></span>',D+=this.atLink(x?this.emoji(y):this.emoji(l)),D+="</h"+g+">"},h.pageBreak=function(l){return b.test(l)&&o.pageBreak&&(l='<hr style="page-break-after:always;" class="page-break editormd-page-break" />'),l},h.paragraph=function(l){var g=/\$\$(.*)\$\$/g.test(l),w=/^\$\$(.*)\$\$$/.test(l),y=w?' class="'+r.classNames.tex+'"':"",x=o.tocm?/^(\[TOC\]|\[TOCM\])$/.test(l):/^\[TOC\]$/.test(l),M=/^\[TOCM\]$/.test(l);l=!w&&g?l.replace(/(\$\$([^\$]*)\$\$)+/g,function(C,S){return'<span class="'+r.classNames.tex+'">'+S.replace(/\$/g,"")+"</span>"}):w?l.replace(/\$/g,""):l;var k='<div class="markdown-toc editormd-markdown-toc">'+l+"</div>";return x?M?'<div class="editormd-toc-menu">'+k+"</div><br/>":k:b.test(l)?this.pageBreak(l):"<p"+y+">"+this.atLink(this.emoji(l))+`</p>
`},h.code=function(l,g,w){return g==="seq"||g==="sequence"?'<div class="sequence-diagram">'+l+"</div>":g==="flow"?'<div class="flowchart">'+l+"</div>":g==="math"||g==="latex"||g==="katex"?'<p class="'+r.classNames.tex+'">'+l+"</p>":n.Renderer.prototype.code.apply(this,arguments)},h.tablecell=function(l,g){var w=g.header?"th":"td",y=g.align?"<"+w+' style="text-align:'+g.align+'">':"<"+w+">";return y+this.atLink(this.emoji(l))+"</"+w+`>
`},h.listitem=function(l){return o.taskList&&/^\s*\[[x\s]\]\s*/.test(l)?(l=l.replace(/^\s*\[\s\]\s*/,'<input type="checkbox" class="task-list-item-checkbox" /> ').replace(/^\s*\[x\]\s*/,'<input type="checkbox" class="task-list-item-checkbox" checked disabled /> '),'<li style="list-style: none;">'+this.atLink(this.emoji(l))+"</li>"):"<li>"+this.atLink(this.emoji(l))+"</li>"},h},r.markdownToCRenderer=function(e,t,i,o){var n="",h=0,c=this.classPrefix;o=o||1;for(var d=0,u=e.length;u>d;d++){var s=e[d].text,p=e[d].level;o>p||(n+=p>h?"":h>p?new Array(h-p+2).join("</ul></li>"):"</ul></li>",n+='<li><a class="toc-level-'+p+'" href="#'+s+'" level="'+p+'">'+s+"</a><ul>",h=p)}var f=t.find(".markdown-toc");if(f.length<1&&t.attr("previewContainer")==="false"){var m='<div class="markdown-toc '+c+'markdown-toc"></div>';m=i?'<div class="'+c+'toc-menu">'+m+"</div>":m,t.html(m),f=t.find(".markdown-toc")}return i&&f.wrap('<div class="'+c+'toc-menu"></div><br/>'),f.html('<ul class="markdown-toc-list"></ul>').children(".markdown-toc-list").html(n.replace(/\r?\n?\<ul\>\<\/ul\>/g,"")),f},r.tocDropdownMenu=function(e,t){t=t||"Table of Contents";var i=400,o=e.find("."+this.classPrefix+"toc-menu");return o.each(function(){var n=a(this),h=n.children(".markdown-toc"),c='<i class="fa fa-angle-down"></i>',d='<a href="javascript:;" class="toc-menu-btn">'+c+t+"</a>",u=h.children("ul"),s=u.find("li");h.append(d),s.first().before("<li><h1>"+t+" "+c+"</h1></li>"),n.mouseover(function(){u.show(),s.each(function(){var p=a(this),f=p.children("ul");if(f.html()===""&&f.remove(),f.length>0&&f.html()!==""){var m=p.children("a").first();m.children(".fa").length<1&&m.append(a(c).css({float:"right",paddingTop:"4px"}))}p.mouseover(function(){f.css("z-index",i).show(),i+=1}).mouseleave(function(){f.hide()})})}).mouseleave(function(){u.hide()})}),o},r.filterHTMLTags=function(e,t){if(typeof e!="string"&&(e=new String(e)),typeof t!="string")return e;for(var i=t.split("|"),o=i[0].split(","),n=i[1],h=0,c=o.length;c>h;h++){var d=o[h];e=e.replace(new RegExp("<s*"+d+"s*([^>]*)>([^>]*)<s*/"+d+"s*>","igm"),"")}if(typeof n<"u"){var u=/\<(\w+)\s*([^\>]*)\>([^\>]*)\<\/(\w+)\>/gi;e=n==="*"?e.replace(u,function(s,p,f,m,v){return"<"+p+">"+m+"</"+v+">"}):n==="on*"?e.replace(u,function(s,p,f,m,v){var b=a("<"+p+">"+m+"</"+v+">"),l=a(s)[0].attributes,g={};a.each(l,function(y,x){x.nodeName!=='"'&&(g[x.nodeName]=x.nodeValue)}),a.each(g,function(y){y.indexOf("on")===0&&delete g[y]}),b.attr(g);var w=typeof b[1]<"u"?a(b[1]).text():"";return b[0].outerHTML+w}):e.replace(u,function(s,p,f,m){var v=n.split(","),b=a(s);return b.html(m),a.each(v,function(l){b.attr(v[l],null)}),b[0].outerHTML})}return e},r.markdownToHTML=function(e,t){var i={gfm:!0,toc:!0,tocm:!1,tocStartLevel:1,tocTitle:"目录",tocDropdown:!1,tocContainer:"",markdown:"",markdownSourceCode:!1,htmlDecode:!1,autoLoadKaTeX:!0,pageBreak:!0,atLink:!0,emailLink:!0,tex:!1,taskList:!1,emoji:!1,flowChart:!1,sequenceDiagram:!1,previewCodeHighlight:!0};r.$marked=marked;var o=a("#"+e),n=o.settings=a.extend(!0,i,t||{}),h=o.find("textarea");h.length<1&&(o.append("<textarea></textarea>"),h=o.find("textarea"));var c=n.markdown===""?h.val():n.markdown,d=[],u={toc:n.toc,tocm:n.tocm,tocStartLevel:n.tocStartLevel,taskList:n.taskList,emoji:n.emoji,tex:n.tex,pageBreak:n.pageBreak,atLink:n.atLink,emailLink:n.emailLink,flowChart:n.flowChart,sequenceDiagram:n.sequenceDiagram,previewCodeHighlight:n.previewCodeHighlight},s={renderer:r.markedRenderer(d,u),gfm:n.gfm,tables:!0,breaks:!0,pedantic:!1,sanitize:!n.htmlDecode,smartLists:!0,smartypants:!0};c=new String(c);var p=marked(c,s);p=r.filterHTMLTags(p,n.htmlDecode),n.markdownSourceCode?h.text(c):h.remove(),o.addClass("markdown-body "+this.classPrefix+"html-preview").append(p);var f=n.tocContainer!==""?a(n.tocContainer):o;if(n.tocContainer!==""&&f.attr("previewContainer",!1),n.toc&&(o.tocContainer=this.markdownToCRenderer(d,f,n.tocDropdown,n.tocStartLevel),(n.tocDropdown||o.find("."+this.classPrefix+"toc-menu").length>0)&&this.tocDropdownMenu(o,n.tocTitle),n.tocContainer!==""&&o.find(".editormd-toc-menu, .editormd-markdown-toc").remove()),n.previewCodeHighlight&&(o.find("pre").addClass("prettyprint linenums"),prettyPrint()),r.isIE8||(n.flowChart&&o.find(".flowchart").flowChart(),n.sequenceDiagram&&o.find(".sequence-diagram").sequenceDiagram({theme:"simple"})),n.tex){var m=function(){o.find("."+r.classNames.tex).each(function(){var v=a(this);katex.render(v.html().replace(/&lt;/g,"<").replace(/&gt;/g,">"),v[0]),v.find(".katex").css("font-size","1.6em")})};!n.autoLoadKaTeX||r.$katex||r.kaTeXLoaded?m():this.loadKaTeX(function(){r.$katex=katex,r.kaTeXLoaded=!0,m()})}return o.getMarkdown=function(){return h.val()},o},r.themes=["default","dark"],r.previewThemes=["default","dark"],r.editorThemes=["default","3024-day","3024-night","ambiance","ambiance-mobile","base16-dark","base16-light","blackboard","cobalt","eclipse","elegant","erlang-dark","lesser-dark","mbo","mdn-like","midnight","monokai","neat","neo","night","paraiso-dark","paraiso-light","pastel-on-dark","rubyblue","solarized","the-matrix","tomorrow-night-eighties","twilight","vibrant-ink","xq-dark","xq-light"],r.loadPlugins={},r.loadFiles={js:[],css:[],plugin:[]},r.loadPlugin=function(e,t,i){t=t||function(){},this.loadScript(e,function(){r.loadFiles.plugin.push(e),t()},i)},r.loadCSS=function(e,t,i){i=i||"head",t=t||function(){};var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.onload=o.onreadystatechange=function(){r.loadFiles.css.push(e),t()},o.href=e+".css",i==="head"?document.getElementsByTagName("head")[0].appendChild(o):document.body.appendChild(o)},r.isIE=navigator.appName=="Microsoft Internet Explorer",r.isIE8=r.isIE&&navigator.appVersion.match(/8./i)=="8.",r.loadScript=function(e,t,i){i=i||"head",t=t||function(){};var o=null;o=document.createElement("script"),o.id=e.replace(/[\./]+/g,"-"),o.type="text/javascript",o.src=e+".js",r.isIE8?o.onreadystatechange=function(){o.readyState&&(o.readyState==="loaded"||o.readyState==="complete")&&(o.onreadystatechange=null,r.loadFiles.js.push(e),t())}:o.onload=function(){r.loadFiles.js.push(e),t()},i==="head"?document.getElementsByTagName("head")[0].appendChild(o):document.body.appendChild(o)},r.katexURL={css:"//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min",js:"//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min"},r.kaTeXLoaded=!1,r.loadKaTeX=function(e){r.loadCSS(r.katexURL.css,function(){r.loadScript(r.katexURL.js,e||function(){})})},r.lockScreen=function(e){a("html,body").css("overflow",e?"hidden":"")},r.createDialog=function(e){var t={name:"",width:420,height:240,title:"",drag:!0,closed:!0,content:"",mask:!0,maskStyle:{backgroundColor:"#fff",opacity:.1},lockScreen:!0,footer:!0,buttons:!1};e=a.extend(!0,t,e);var i=this,o=this.editor,n=r.classPrefix,h=new Date().getTime(),c=e.name===""?n+"dialog-"+h:e.name,d=r.mouseOrTouch,u='<div class="'+n+"dialog "+c+'">';e.title!==""&&(u+='<div class="'+n+'dialog-header"'+(e.drag?' style="cursor: move;"':"")+">",u+='<strong class="'+n+'dialog-title">'+e.title+"</strong>",u+="</div>"),e.closed&&(u+='<a href="javascript:;" class="fa fa-close '+n+'dialog-close"></a>'),u+='<div class="'+n+'dialog-container">'+e.content,(e.footer||typeof e.footer=="string")&&(u+='<div class="'+n+'dialog-footer">'+(typeof e.footer=="boolean"?"":e.footer)+"</div>"),u+="</div>",u+='<div class="'+n+"dialog-mask "+n+'dialog-mask-bg"></div>',u+='<div class="'+n+"dialog-mask "+n+'dialog-mask-con"></div>',u+="</div>",o.append(u);var s=o.find("."+c);s.lockScreen=function(k){return e.lockScreen&&(a("html,body").css("overflow",k?"hidden":""),i.resize()),s},s.showMask=function(){return e.mask&&o.find("."+n+"mask").css(e.maskStyle).css("z-index",r.dialogZindex-1).show(),s},s.hideMask=function(){return e.mask&&o.find("."+n+"mask").hide(),s},s.loading=function(k){var C=s.find("."+n+"dialog-mask");return C[k?"show":"hide"](),s},s.lockScreen(!0).showMask(),s.show().css({zIndex:r.dialogZindex,border:r.isIE8?"1px solid #ddd":"",width:typeof e.width=="number"?e.width+"px":e.width,height:typeof e.height=="number"?e.height+"px":e.height});var p=function(){s.css({top:(a(window).height()-s.height())/2+"px",left:(a(window).width()-s.width())/2+"px"})};if(p(),a(window).resize(p),s.children("."+n+"dialog-close").bind(d("click","touchend"),function(){s.hide().lockScreen(!1).hideMask()}),typeof e.buttons=="object"){var f=s.footer=s.find("."+n+"dialog-footer");for(var m in e.buttons){var v=e.buttons[m],b=n+m+"-btn";f.append('<button class="'+n+"btn "+b+'">'+v[0]+"</button>"),v[1]=a.proxy(v[1],s),f.children("."+b).bind(d("click","touchend"),v[1])}}if(e.title!==""&&e.drag){var l,g,w=s.children("."+n+"dialog-header");e.mask||w.bind(d("click","touchend"),function(){r.dialogZindex+=2,s.css("z-index",r.dialogZindex)}),w.mousedown(function(k){k=k||window.event,l=k.clientX-parseInt(s[0].style.left),g=k.clientY-parseInt(s[0].style.top),document.onmousemove=M});var y=function(k){k.removeClass(n+"user-unselect").off("selectstart")},x=function(k){k.addClass(n+"user-unselect").on("selectstart",function(C){return!1})},M=function(k){k=k||window.event;var C,S,L=parseInt(s[0].style.left),T=parseInt(s[0].style.top);L>=0?L+s.width()<=a(window).width()?C=k.clientX-l:(C=a(window).width()-s.width(),document.onmousemove=null):(C=0,document.onmousemove=null),T>=0?S=k.clientY-g:(S=0,document.onmousemove=null),document.onselectstart=function(){return!1},x(a("body")),x(s),s[0].style.left=C+"px",s[0].style.top=S+"px"};document.onmouseup=function(){y(a("body")),y(s),document.onselectstart=null,document.onmousemove=null},w.touchDraggable=function(){var k=null,C=function(L){var T=L.originalEvent,j=a(this).parent().position();k={x:T.changedTouches[0].pageX-j.left,y:T.changedTouches[0].pageY-j.top}},S=function(L){L.preventDefault();var T=L.originalEvent;a(this).parent().css({top:T.changedTouches[0].pageY-k.y,left:T.changedTouches[0].pageX-k.x})};this.bind("touchstart",C).bind("touchmove",S)},w.touchDraggable()}return r.dialogZindex+=2,s},r.mouseOrTouch=function(e,t){e=e||"click",t=t||"touchend";var i=e;try{document.createEvent("TouchEvent"),i=t}catch{}return i},r.dateFormat=function(e){e=e||"";var t=function(y){return 10>y?"0"+y:y},i=new Date,o=i.getFullYear(),n=o.toString().slice(2,4),h=t(i.getMonth()+1),c=t(i.getDate()),d=i.getDay(),u=t(i.getHours()),s=t(i.getMinutes()),p=t(i.getSeconds()),f=t(i.getMilliseconds()),m="",v=n+"-"+h+"-"+c,b=o+"-"+h+"-"+c,l=u+":"+s+":"+p;switch(e){case"UNIX Time":m=i.getTime();break;case"UTC":m=i.toUTCString();break;case"yy":m=n;break;case"year":case"yyyy":m=o;break;case"month":case"mm":m=h;break;case"cn-week-day":case"cn-wd":var g=["日","一","二","三","四","五","六"];m="星期"+g[d];break;case"week-day":case"wd":var w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];m=w[d];break;case"day":case"dd":m=c;break;case"hour":case"hh":m=u;break;case"min":case"ii":m=s;break;case"second":case"ss":m=p;break;case"ms":m=f;break;case"yy-mm-dd":m=v;break;case"yyyy-mm-dd":m=b;break;case"yyyy-mm-dd h:i:s ms":case"full + ms":m=b+" "+l+" "+f;break;case"full":case"yyyy-mm-dd h:i:s":default:m=b+" "+l}return m},r}})});export default X();
